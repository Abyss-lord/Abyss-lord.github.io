<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Gravitino事件系统设计</title>
      <link href="/2025/06/19/gravitino/2025-06-19-gravitino-eventsystem/"/>
      <url>/2025/06/19/gravitino/2025-06-19-gravitino-eventsystem/</url>
      
        <content type="html"><![CDATA[<h2 id="背景"><a class="markdownIt-Anchor" href="#背景"></a> 背景</h2><p>为提升&nbsp;<strong>Gravitino 的扩展性</strong>，引入了<strong>可插拔的事件监听系统</strong>，允许用户在 Gravitino 的操作后挂载自定义逻辑。典型使用场景包括：</p><ul><li>日志审计；</li><li>向其他 Catalog 进行双写；</li></ul><h2 id="设计目标"><a class="markdownIt-Anchor" href="#设计目标"></a> 设计目标</h2><ul><li>支持在&nbsp;<strong>Gravitino 服务</strong>&nbsp;与&nbsp;<strong>Iceberg REST Catalog 服务</strong>&nbsp;中统一接入事件监听机制</li><li>支持可插拔插件体系，方便第三方自定义事件处理逻辑</li></ul><p>不支持</p><ul><li><strong>强一致性的权限控制</strong>（如精细化授权）不作为目标</li><li><strong>事件监听器内部异常处理</strong>（如线程阻塞、挂起）交由调用方自行管理</li><li><strong>权限校验</strong>在 HTTP Handler 层完成，不由事件机制承担</li><li>该机制<strong>不用于 Gravitino 内部模块之间的通信</strong></li></ul><h2 id="具体设计"><a class="markdownIt-Anchor" href="#具体设计"></a> 具体设计</h2><p>提供 hook 点，在 Gravitino 操作完成后触发事件。事件可以同步或异步处理。</p><h3 id="用户视角"><a class="markdownIt-Anchor" href="#用户视角"></a> 用户视角</h3><h4 id="配置方式"><a class="markdownIt-Anchor" href="#配置方式"></a> 配置方式</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 配置一个事件监听器</span><span class="token assign-left variable">gravitino.eventListener.names</span><span class="token operator">=</span>audit<span class="token comment"># 配置多个事件监听器</span><span class="token assign-left variable">gravitino.eventListener.names</span><span class="token operator">=</span>audit,test<span class="token comment"># 监听器实现类</span>gravitino.eventListener.<span class="token punctuation">{</span>name<span class="token punctuation">}</span>.class<span class="token operator">=</span>xxxx<span class="token comment"># 用户自定义属性</span>gravitino.eventListener.<span class="token punctuation">{</span>name<span class="token punctuation">}</span>.<span class="token punctuation">{</span>key<span class="token punctuation">}</span><span class="token comment"># 配置异步队列大小</span>gravitino.eventListener.<span class="token punctuation">{</span>name<span class="token punctuation">}</span>.queueCapacity<span class="token operator">=</span><span class="token number">1000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="接口定义"><a class="markdownIt-Anchor" href="#接口定义"></a> 接口定义</h4><p>核心接口：<code>EventListenerPlugin</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EventListenerPlugin</span> <span class="token punctuation">{</span>  <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">onPostEvent</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 接收事件</span>  <span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">isAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">isSharedQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>事件资源类型：<code>EventResourceType</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">EventResourceType</span> <span class="token punctuation">{</span>  <span class="token constant">METALAKE</span><span class="token punctuation">,</span> <span class="token constant">CATALOG</span><span class="token punctuation">,</span> <span class="token constant">RELATION</span><span class="token punctuation">,</span> <span class="token constant">FILESET</span><span class="token punctuation">,</span> <span class="token constant">ICEBERG_REST</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="实现视角"><a class="markdownIt-Anchor" href="#实现视角"></a> 实现视角</h3><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250530130828.png" alt="Implement"></p><h4 id="核心组件"><a class="markdownIt-Anchor" href="#核心组件"></a> 核心组件</h4><ul><li><strong>EventListenerManager</strong>：负责加载所有事件监听插件，并根据不同操作类型创建对应的&nbsp;<code>EventBus</code>。</li><li><strong>EventBus</strong>：管理一组功能一致的事件监听器，按照顺序将事件分发给每个监听器。支持同步与异步监听器，异步处理由&nbsp;<code>AsyncQueueListener</code>&nbsp;管理。</li><li><strong>AsyncQueueListener</strong>：通过队列机制异步消费事件。不同监听器可通过配置队列名共享消费线程，实现事件的串行或并行处理。</li></ul><h4 id="生命周期与流程"><a class="markdownIt-Anchor" href="#生命周期与流程"></a> 生命周期与流程</h4><ol><li>全局唯一的&nbsp;<code>EventListenerManager</code></li><li>加载监听器插件</li><li>创建对应的&nbsp;<code>AsyncQueueListener</code>&nbsp;实例</li><li>为每种 HTTP 操作构建并注册&nbsp;<code>EventBus</code>&nbsp;实例，绑定监听器集合</li></ol><h4 id="设计考量"><a class="markdownIt-Anchor" href="#设计考量"></a> 设计考量</h4><p>接口粒度</p><p>方案一：统一处理事件</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuditLogEventListenerPlugin</span> <span class="token keyword">implements</span> <span class="token class-name">EventListenerPlugin</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPostEvent</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 从 event 中提取审计信息并写入日志</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>优势</strong>：适合通用逻辑，插件逻辑集中；</li><li><strong>劣势</strong>：对每个事件都需要解析字段，不够明确</li></ul><p>方案二：细分回调接口</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuditLogEventListenerPlugin</span> <span class="token keyword">implements</span> <span class="token class-name">RelationalEventListener</span> <span class="token punctuation">{</span>  <span class="token keyword">void</span> <span class="token function">onTableCreate</span><span class="token punctuation">(</span><span class="token class-name">NameIdentifier</span> id<span class="token punctuation">,</span> <span class="token class-name">OperationResult</span> result<span class="token punctuation">,</span> <span class="token class-name">Table</span> table<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 写审计日志</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>优势</strong>：更直观清晰</li><li><strong>劣势</strong>：每个事件都需要写独立方法，代码重复</li></ul><table><thead><tr><th>模式</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>同步</td><td>不丢事件</td><td>阻塞主流程</td></tr><tr><td>异步</td><td>不阻塞主流程</td><td>可能丢事件</td></tr></tbody></table><p>同时支持同步和异步，由插件本身决定</p><p>是否支持类加载隔离</p><p><strong>支持更好</strong>，否则所有插件只能放在 Gravitino 的 classpath 中，可能冲突。</p><h3 id="dispatcher-视角"><a class="markdownIt-Anchor" href="#dispatcher-视角"></a> Dispatcher 视角</h3><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250530130843.png" alt="Dispatcher"></p><p>Gravitino 的 Catalog 实现采用了经典的<strong>装饰器模式（Decorator Pattern）</strong>。在该模式下，所有组件均实现相同的接口（或继承统一的抽象类），通过<strong>包装已有对象</strong>的方式，在不修改其原有逻辑的前提下，增强其功能。</p><p>以&nbsp;<code>ModelEventDispatcher</code>&nbsp;为例，它并不直接处理具体的 Catalog 操作，而是<strong>包装一个实际的 Dispatcher 实例</strong>。核心职责如下：</p><ul><li>将操作委托给被包装的底层 Dispatcher；</li><li>在委托执行前后插入自定义逻辑，如触发事件系统、发布事件等。</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ModelEventDispatcher</span> <span class="token keyword">implements</span> <span class="token class-name">ModelDispatcher</span> <span class="token punctuation">{</span>  <span class="token comment">// 构造的时候传递 EventBus 实例以及 ModelDispatcher 实现类</span>  <span class="token keyword">public</span> <span class="token class-name">ModelEventDispatcher</span><span class="token punctuation">(</span><span class="token class-name">EventBus</span> eventBus<span class="token punctuation">,</span> <span class="token class-name">ModelDispatcher</span> dispatcher<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>eventBus <span class="token operator">=</span> eventBus<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>dispatcher <span class="token operator">=</span> dispatcher<span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token comment">// 使用 eventBus.dispatchEvent 发送事件 -&gt; eventBus.dispatchPostEvent -&gt; 触发每个 Plugin 的 onPostEvent 进行处理</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">public</span> <span class="token class-name">Model</span> <span class="token function">registerModel</span><span class="token punctuation">(</span><span class="token class-name">NameIdentifier</span> ident<span class="token punctuation">,</span> <span class="token class-name">String</span> comment<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">)</span>  <span class="token keyword">throws</span> <span class="token class-name">NoSuchSchemaException</span><span class="token punctuation">,</span> <span class="token class-name">ModelAlreadyExistsException</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token class-name">PrincipalUtils</span><span class="token punctuation">.</span><span class="token function">getCurrentUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ModelInfo</span> registerRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelInfo</span><span class="token punctuation">(</span>ident<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> properties<span class="token punctuation">,</span> comment<span class="token punctuation">)</span><span class="token punctuation">;</span>    eventBus<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegisterModelPreEvent</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> ident<span class="token punctuation">,</span> registerRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token class-name">Model</span> model <span class="token operator">=</span> dispatcher<span class="token punctuation">.</span><span class="token function">registerModel</span><span class="token punctuation">(</span>ident<span class="token punctuation">,</span> comment<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">ModelInfo</span> registeredModel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelInfo</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>      eventBus<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegisterModelEvent</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> ident<span class="token punctuation">,</span> registeredModel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> model<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      eventBus<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegisterModelFailureEvent</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> ident<span class="token punctuation">,</span> e<span class="token punctuation">,</span> registerRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">throw</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> 代码实现</h2><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250530130927.png" alt="EventBus"></p><h2 id="监听器"><a class="markdownIt-Anchor" href="#监听器"></a> 监听器</h2><p>监听器的接口是 <code>EventListenerPlugin</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DeveloperApi</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EventListenerPlugin</span> <span class="token punctuation">{</span> <span class="token keyword">enum</span> <span class="token class-name">Mode</span> <span class="token punctuation">{</span>    <span class="token constant">SYNC</span><span class="token punctuation">,</span>    <span class="token constant">ASYNC_ISOLATED</span><span class="token punctuation">,</span>    <span class="token constant">ASYNC_SHARED</span>  <span class="token punctuation">}</span>   <span class="token comment">// 初始化方法，初始化插件，用于加载配置、连接资源等</span> <span class="token comment">// 和服务器一起启动，如果插件启动失败，则会导致服务器启动失败</span>  <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">;</span>    <span class="token comment">// 插件启动阶段，表示插件准备好开始处理事件</span>  <span class="token comment">// 启动失败，依然会导致服务器启动失败</span>  <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">;</span>    <span class="token comment">// 停止该插件，异常不会影响主流程，但建议清理资源以防泄漏</span>  <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">;</span>    <span class="token comment">// 处理操作执行前的事件（如校验、拒绝等）</span>  <span class="token comment">// 如果抛出 ForbiddenException 且模式为 SYNC，主操作将被跳过</span> <span class="token comment">// 在 ASYNC 模式下抛出异常无效，只记录日志</span> <span class="token comment">// 允许修改事件中的资源（如动态修改参数）</span>  <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">onPreEvent</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span> preEvent<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ForbiddenException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// 处理操作完成后的事件（如创建表后触发）</span> <span class="token comment">// 默认实现为空，只读事件，不能改变资源</span> <span class="token comment">// 可同步或异步执行（由 mode() 决定）</span>  <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">onPostEvent</span><span class="token punctuation">(</span><span class="token class-name">Event</span> postEvent<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">// 该监听器的事件处理模式</span>  <span class="token comment">// 默认使用同步</span>  <span class="token keyword">default</span> <span class="token class-name">Mode</span> <span class="token function">mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token class-name">Mode</span><span class="token punctuation">.</span><span class="token constant">SYNC</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>模式</th><th>特点</th><th>适用场景</th></tr></thead><tbody><tr><td><code>SYNC</code></td><td>同步执行，阻塞主线程</td><td>拒绝请求、写审计、修改事件资源</td></tr><tr><td><code>ASYNC_ISOLATED</code></td><td>异步执行，每个监听器独立队列</td><td>各监听器资源隔离，处理较复杂</td></tr><tr><td><code>ASYNC_SHARED</code></td><td>异步执行，监听器共享队列</td><td>多监听器共享线程，资源高效</td></tr></tbody></table><h3 id="eventbus"><a class="markdownIt-Anchor" href="#eventbus"></a> EventBus</h3><p>核心字段</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 存储所有注册的事件监听器实例</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListenerPlugin</span><span class="token punctuation">&gt;</span></span> eventListeners<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>核心方法</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventBus</span> <span class="token punctuation">{</span>  <span class="token comment">// 发送 PreEvent 或者 Event</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token class-name">BaseEvent</span> baseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>baseEvent <span class="token keyword">instanceof</span> <span class="token class-name">PreEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">dispatchPreEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span><span class="token punctuation">)</span> baseEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>baseEvent <span class="token keyword">instanceof</span> <span class="token class-name">Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">dispatchPostEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Event</span><span class="token punctuation">)</span> baseEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"Unknown event type:"</span> <span class="token operator">+</span> baseEvent<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// 发送 PostEvent</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dispatchPostEvent</span><span class="token punctuation">(</span><span class="token class-name">Event</span> postEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    eventListeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>eventListener <span class="token operator">-&gt;</span> eventListener<span class="token punctuation">.</span><span class="token function">onPostEvent</span><span class="token punctuation">(</span>postEvent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token comment">// 发送 PreEvent</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dispatchPreEvent</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span> preEvent<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ForbiddenException</span> <span class="token punctuation">{</span>    eventListeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>eventListener <span class="token operator">-&gt;</span> eventListener<span class="token punctuation">.</span><span class="token function">onPreEvent</span><span class="token punctuation">(</span>preEvent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="eventlistenermanager"><a class="markdownIt-Anchor" href="#eventlistenermanager"></a> EventListenerManager</h3><p>根据配置加载监听器 → 包装处理（按执行模式） → 构建可用的监听器列表 → 创建&nbsp;<code>EventBus</code>&nbsp;用于事件分发。</p><p>关键字段:</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 异步队列大小</span><span class="token keyword">private</span> <span class="token keyword">int</span> queueCapacity<span class="token punctuation">;</span><span class="token comment">// join 超时等待时间</span><span class="token keyword">private</span> <span class="token keyword">int</span> dispatcherJoinSeconds<span class="token punctuation">;</span><span class="token comment">// 所有处理完组装逻辑后的监听器列表</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListenerPlugin</span><span class="token punctuation">&gt;</span></span> eventListeners<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>关键方法</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EventListenerManager</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">EventListenerConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventListenerConfig</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 默认队列大小 3000，超过队列大小则事件会被抛弃</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>queueCapacity <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">EventListenerConfig</span><span class="token punctuation">.</span><span class="token constant">QUEUE_CAPACITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// join 超时事件 3 秒</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherJoinSeconds <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">EventListenerConfig</span><span class="token punctuation">.</span><span class="token constant">DISPATCHER_JOIN_SECONDS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1. 解析配置 → 找出所有监听器名字（例如 audit、metrics）</span>  <span class="token comment">// 2. 加载并实例化每个监听器类，通过反射的方式构建实现类对象并调用 init 方法</span>  <span class="token comment">// 3. 包装为 EventListenerWrapper / AsyncQueueListener</span>  <span class="token comment">// 4. 根据是否是 shared queue 进行分组组装</span>  <span class="token punctuation">}</span>  <span class="token comment">//  启动所有的插件</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    eventListeners<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>listener <span class="token operator">-&gt;</span> listener<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment">// 停止所有的插件</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    eventListeners<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>listener <span class="token operator">-&gt;</span> listener<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment">// 根据插件模式（Mode）构建不同包装的插件实例  </span>  <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">EventListenerPlugin</span><span class="token punctuation">&gt;</span></span> <span class="token function">assembleEventListeners</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">EventListenerPlugin</span><span class="token punctuation">&gt;</span></span> userEventListeners<span class="token punctuation">)</span>    <span class="token comment">// 使用配置的 class 字段获取类名并实例化</span>  <span class="token comment">// 调用 init(config) 初始化</span> <span class="token comment">// 如果失败，会记录日志并抛出异常阻止启动</span>  <span class="token keyword">private</span> <span class="token class-name">EventListenerPlugin</span> <span class="token function">loadUserEventListenerPlugin</span><span class="token punctuation">(</span><span class="token class-name">String</span> listenerName<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> config<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>模式</th><th>包装方式</th><th>特点</th></tr></thead><tbody><tr><td><code>SYNC</code></td><td><code>EventListenerPluginWrapper</code></td><td>同步执行，可记录 metrics、处理异常等（默认模式）</td></tr><tr><td><code>ASYNC_ISOLATED</code></td><td>单独的&nbsp;<code>AsyncQueueListener</code></td><td>每个插件独立线程/队列</td></tr><tr><td><code>ASYNC_SHARED</code></td><td>汇总后统一放入&nbsp;<code>AsyncQueueListener ("default")</code></td><td>多个插件共享线程/队列，节省资源</td></tr></tbody></table><p>注意事项</p><ul><li>所有共享模式插件会集中起来，在最后统一创建一个&nbsp;<code>AsyncQueueListener ("default")</code></li><li>所有包装后的插件都实现&nbsp;<code>EventListenerPlugin</code>，因此可统一交给&nbsp;<code>EventBus</code>&nbsp;使用</li></ul><h3 id="eventlistenerpluginwrapper"><a class="markdownIt-Anchor" href="#eventlistenerpluginwrapper"></a> EventListenerPluginWrapper</h3><p><code>EventListenerManager</code>&nbsp;在管理插件时，创建的都是&nbsp;<code>EventListenerPluginWrapper</code>&nbsp;实例，该类封装了诸如异常处理等公共逻辑。其&nbsp;<code>onPreEvent</code>&nbsp;包装方法根据 Mode 定义了不同的行为：例如在 SYNC 模式下，如果 PreEvent 抛出&nbsp;<code>ForbiddenException</code>&nbsp;异常，则会立即中断操作并抛出该异常。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPreEvent</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span> preEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">try</span> <span class="token punctuation">{</span>   userEventListener<span class="token punctuation">.</span><span class="token function">onPreEvent</span><span class="token punctuation">(</span>preEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ForbiddenException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Mode</span><span class="token punctuation">.</span><span class="token constant">SYNC</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token function">mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token constant">LOG</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>       <span class="token string">"Event listener {} process pre event {} throws ForbiddenException, will skip the "</span>       <span class="token operator">+</span> <span class="token string">"operation."</span><span class="token punctuation">,</span>       listenerName<span class="token punctuation">,</span>       preEvent<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       e<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">throw</span> e<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token function">printExceptionInEventProcess</span><span class="token punctuation">(</span>listenerName<span class="token punctuation">,</span> preEvent<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token function">printExceptionInEventProcess</span><span class="token punctuation">(</span>listenerName<span class="token punctuation">,</span> preEvent<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="event"><a class="markdownIt-Anchor" href="#event"></a> Event</h3><h4 id="preevent"><a class="markdownIt-Anchor" href="#preevent"></a> PreEvent</h4><p><code>PreEvent</code> 表示操作请求的前置事件。在操作正式执行前，该事件允许用户插入自定义拦截逻辑；在使用<strong>同步</strong>插件时，如果抛出&nbsp;<code>ForbiddenException</code>，则会中止当前操作。</p><h4 id="postevent"><a class="markdownIt-Anchor" href="#postevent"></a> PostEvent</h4><p><code>PostEvent</code> 表示操作成功完成后的事件。如果操作执行失败，则会生成一个&nbsp;<code>FailureEvent</code>，该事件归类为 PostEvent。PostEvent 一经生成，用户无法修改或拦截该事件。</p><h4 id="failureevent"><a class="markdownIt-Anchor" href="#failureevent"></a> FailureEvent</h4><p>FailureEvent 用于表示操作执行失败的情况。它记录了导致错误的原因以及其他相关信息，以便后续进行错误分析与处理。</p><h3 id="dummyeventlistener"><a class="markdownIt-Anchor" href="#dummyeventlistener"></a> DummyEventListener</h3><p>该类用于测试，是&nbsp;<code>EventListenerPlugin</code>&nbsp;接口的一种实现。它分别使用两个&nbsp;<code>LinkedList</code>&nbsp;来存储&nbsp;<code>PostEvent</code>&nbsp;和&nbsp;<code>PreEvent</code>&nbsp;事件。之所以采用&nbsp;<code>LinkedList</code>，是因为需要使用&nbsp;<code>removeLast ()</code>&nbsp;方法弹出队列末尾的事件，而该位置存储了最新产生的事件。通过提供&nbsp;<code>popPostEvent</code>&nbsp;和&nbsp;<code>popPreEvent</code>&nbsp;方法，测试代码能够取出最新事件进行验证。</p><blockquote><p>通常这种 “Dummy” 或者 “Mock” 实现用于测试场景中，模拟事件监听器的行为，或作为简单的占位实现，用于验证事件发布和消费逻辑。</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Event</span> <span class="token function">popPostEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>postEvents<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"No events to pop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> postEvents<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">PreEvent</span> <span class="token function">popPreEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>preEvents<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"No events to pop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> preEvents<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同时提供了一个异步实现 <code>DummyAsyncEventListener</code> ，这个类使用 <code>tryGetPreEvents</code> 和 <code>tryGetPostEvents</code> 方法来异步获取事件。</p><ol><li>最多等待 20 秒；</li><li>轮训间隔 10 毫秒；</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PreEvent</span><span class="token punctuation">&gt;</span></span> <span class="token function">tryGetPreEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Awaitility</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">atMost</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">pollInterval</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">getPreEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">getPreEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Event</span><span class="token punctuation">&gt;</span></span> <span class="token function">tryGetPostEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Awaitility</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">atMost</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">pollInterval</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">until</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">getPostEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">getPostEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="asyncqueuelistener"><a class="markdownIt-Anchor" href="#asyncqueuelistener"></a> AsyncQueueListener</h3><p><code>AsyncQueueListener</code>&nbsp;实现了&nbsp;<code>EventListenerPlugin</code>&nbsp;接口，用于异步地接收并分发事件。其核心思想是利用一个阻塞队列（<code>BlockingQueue&lt;BaseEvent&gt;</code>）缓存事件，再由一个专门的线程（<code>asyncProcessor</code>）不停地从队列中取出事件，并把这些事件分发给所有真实的监听器。这种方式的好处在于能够解耦事件的产生和事件的处理，实现异步分发，提升系统的响应能力。</p><p>关键字段</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 原子标志，表示异步监听器是否已经停止。</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicBoolean</span> stopped：<span class="token comment">// 用于记录队列因满或者其他原因而丢弃的事件数量。</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicLong</span> dropEventCounters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicLong</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AtomicLong</span> lastDropEventCounters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicLong</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 最后一次事件记录的事件，使用 Instant 对象</span><span class="token keyword">private</span> <span class="token class-name">Instant</span> lastRecordDropEventTime<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>processEvents</code> 方法用于处理事件，它的核心逻辑如下：</p><ul><li>该方法位于无限循环中，使用&nbsp;<code>queue. take ()</code>&nbsp;阻塞等待队列中有事件可以处理。</li><li>判断取出的事件是 PreEvent 或 PostEvent，并分别调用所有监听器对应的&nbsp;<code>onPreEvent</code>&nbsp;或&nbsp;<code>onPostEvent</code>&nbsp;方法。</li><li>在处理过程中捕获&nbsp;<code>InterruptedException</code>（线程被中断时退出循环）以及其他异常，并记录日志信息。</li></ul><h2 id="改进"><a class="markdownIt-Anchor" href="#改进"></a> 改进</h2><h3 id="event-实现增强"><a class="markdownIt-Anchor" href="#event-实现增强"></a> Event 实现增强</h3><p>使用 <code>instanceOf</code> 进行分支判断这种实现非常的糟糕，具体来说</p><ul><li>当前实现对支持的事件类型进行硬编码。每当添加一个新的事件类型（例如，FailureEvent、AuditEvent）时，都必须修改 <code>dispatchEvent</code> 方法。</li><li>如果事件类型的数量在未来增加或变得更细粒度，很容易错过处理某些分支;</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token class-name">BaseEvent</span> baseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>baseEvent <span class="token keyword">instanceof</span> <span class="token class-name">PreEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">dispatchPreEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span><span class="token punctuation">)</span> baseEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>baseEvent <span class="token keyword">instanceof</span> <span class="token class-name">Event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">dispatchPostEvent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Event</span><span class="token punctuation">)</span> baseEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"Unknown event type:"</span> <span class="token operator">+</span> baseEvent<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一个更好的实现应具备如下特点</p><ul><li>类型安全：消除 <code>instanceof</code> 检查，所有的问题都会在编译期暴露；</li><li>解耦：事件只负责调用 <code>accept</code> 方法，不关心监听器的实现；</li><li>强封装：通过限制对访问者方法的直接访问，防止外部误用；</li><li>扩展性：添加新的事件类型只需要创建新的类和 <code>visitXXX ()</code> 方法，而无需修改分发逻辑；</li></ul><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250530130950.png" alt="EventDispatcher类图"></p><p>为了限制外部对访问者方法的直接访问，因此使用一个内部静态类来实现 <code>EventDispatcher</code> 接口，具体代码如下：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">InternalVisitor</span> <span class="token keyword">implements</span> <span class="token class-name">EventDispatcher</span> <span class="token punctuation">{</span>    <span class="token comment">/** {@inheritDoc} */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispatchPreEvent</span><span class="token punctuation">(</span><span class="token class-name">PreEvent</span> event<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ForbiddenException</span> <span class="token punctuation">{</span>      eventListeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>eventListener <span class="token operator">-&gt;</span> eventListener<span class="token punctuation">.</span><span class="token function">onPreEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/** {@inheritDoc} */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispatchPostEvent</span><span class="token punctuation">(</span><span class="token class-name">Event</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>      eventListeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>eventListener <span class="token operator">-&gt;</span> eventListener<span class="token punctuation">.</span><span class="token function">onPostEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>经过改造，EventBus 的 <code>dispatchEvent</code> 方法如下：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token class-name">BaseEvent</span> baseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    baseEvent<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>internalVisitor<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 大数据组件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gravitino </tag>
            
            <tag> 元数据 </tag>
            
            <tag> 统一元数据 </tag>
            
            <tag> AI Infra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RESTful 架构</title>
      <link href="/2025/03/24/computer/2025-03-24-restful-api/"/>
      <url>/2025/03/24/computer/2025-03-24-restful-api/</url>
      
        <content type="html"><![CDATA[<h2 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h2><p>REST (Representational State Transfer)，中文意思是：表述性状态转移。即一组架构约束条件和原则，如果一个架构符合 REST 的约束条件和原则，我们就称它为 RESTful 架构。</p><ol><li>在 REST 中，一切的内容都被认为是一种资源</li><li>每个资源都由 URI 唯一标识</li><li>使用统一的接口处理资源请求（POST/GET/PUT/DELETE/HEAD）</li><li>无状态（每次请求之前是无关联，没有 session ）</li></ol><p>REST 可以理解为 Client 和 Server 之间的一种交互方式，即 Client 发出 HTTP 请求，Server 端的资源发生状态转移，例如更新、删除等。而 RESTful API 则可以理解为 Server 端提供具有 REST 风格的接口。</p><p>符合 REST 规范的服务不应该保存客户端状态也不会保存应用的状态。</p><h3 id="资源和-uri"><a class="markdownIt-Anchor" href="#资源和-uri"></a> 资源和 URI</h3><ol><li>使用&nbsp;<code>/</code>&nbsp;来表示资源的层级关系</li><li>使用&nbsp;<code>?</code>&nbsp;用来过滤资源</li><li>使用&nbsp;<code>_</code>&nbsp;或者&nbsp;<code>-</code>&nbsp;让 URI 的可读性更好</li><li><code>,</code>&nbsp;或&nbsp;<code>;</code>&nbsp;可以用来表示同级资源的关系</li></ol><h3 id="统一资源接口"><a class="markdownIt-Anchor" href="#统一资源接口"></a> 统一资源接口</h3><table><thead><tr><th>请求方法</th><th>描述</th></tr></thead><tbody><tr><td>GET</td><td>获取某个资源。幂等（取多少次结果都没有变化）</td></tr><tr><td>POST</td><td>创建一个新的资源</td></tr><tr><td>PUT</td><td>替换某个已有的资源（更新操作） ，幂等（更新多次只保存一个结果）</td></tr><tr><td>DELETE</td><td>删除某个资源</td></tr><tr><td>HEAD</td><td>主要用于确认 URL 的有效性以及资源更新的日期时间等</td></tr><tr><td>PATCH</td><td>新引入的，对 PUT 方法的补充，用来对已知资源进行局部更新</td></tr></tbody></table><h3 id="资源表述"><a class="markdownIt-Anchor" href="#资源表述"></a> 资源表述</h3><p>客户端通过 HTTP 方法可以获取资源，确切的来说，客户端获取的只是资源的表述而已，传输的不是资源本身。资源的表述包括数据和描述数据的元数据，例如，HTTP 头 “Content-Type” 就是这样一个元数据属性。客户端可以通过 <code>Accept</code> 头请求一种特定格式的表述，服务端则通过 <code>Content-Type</code> 告诉客户端资源的表述形式。</p><h2 id="实践"><a class="markdownIt-Anchor" href="#实践"></a> 实践</h2><ol><li>将 API 部署在专用域名之下；</li><li>将 API 的版本号放入 URL；</li><li>在 RESTful 架构中，每个网址代表一种资源（resource），所以网址中不能有动词，只能有名词，而且所用的名词往往与数据库的表格名对应。一般来说，数据库中的表都是同种记录的 ”集合”（collection），所以 API 中的名词也应该使用复数。</li><li>如果记录数量很多，服务器不可能都将它们返回给用户。API 应该提供参数，过滤返回结果</li><li>服务器向用户返回的状态码和提示信息</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">http://api.douban.com/v2/book/:id <span class="token punctuation">(</span>获取图书信息<span class="token punctuation">)</span>http://api.douban.com/v2/movie/subject/:id <span class="token punctuation">(</span>电影条目信息<span class="token punctuation">)</span>http://api.douban.com/v2/music/:id <span class="token punctuation">(</span>获取音乐信息<span class="token punctuation">)</span>http://api.douban.com/v2/event/:id <span class="token punctuation">(</span>获取同城活动<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 计算机技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机基础 </tag>
            
            <tag> REST架构 </tag>
            
            <tag> HTTP协议 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>参数表示方法及语法约定</title>
      <link href="/2025/03/24/computer/2025-03-24-arguments-signature/"/>
      <url>/2025/03/24/computer/2025-03-24-arguments-signature/</url>
      
        <content type="html"><![CDATA[<h2 id="表示方法"><a class="markdownIt-Anchor" href="#表示方法"></a> 表示方法</h2><ol><li><code>[ ]</code>： 表示<strong>可选参数</strong>，使用时可以省略</li><li><code>&lt; &gt;</code>： 表示<strong>必选参数</strong>，必须提供具体值</li><li><code>{ }</code>： 表示<strong>选择性参数</strong>，需从中选择一个选项，通常与&nbsp;<code>|</code>&nbsp;一起使用</li><li><code>( )</code>： 表示<strong>默认参数</strong>值</li><li><code>|</code>： 表示<strong>互斥选项</strong>，只能选择其中一个</li><li><code>…</code>： 表示<strong>可重复的前项</strong>，允许多次使用前面的参数</li><li><code>--</code>： 通常表示<strong>长选项名称</strong>（如&nbsp;<code>--help</code>）</li><li><code>-</code>：通常表示<strong>短选项</strong>（如&nbsp;<code>-h</code>）</li></ol><h2 id="特殊表示方法"><a class="markdownIt-Anchor" href="#特殊表示方法"></a> 特殊表示方法</h2><ul><li><strong>粗体</strong>： 表示必须按原样键入的命令或关键字；</li><li><strong>占位符</strong>：<code>$VAR</code> 或者 <code>%VAR%</code> 表示环境变量或者需要替换的值。</li></ul><h2 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h2><h3 id="命令行工具-cli"><a class="markdownIt-Anchor" href="#命令行工具-cli"></a> 命令行工具 (CLI)</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Linux/Unix man 页面风格</span><span class="token builtin class-name">command</span> <span class="token punctuation">[</span>-a<span class="token punctuation">]</span> <span class="token punctuation">[</span>-b value<span class="token punctuation">]</span> file<span class="token punctuation">..</span>.<span class="token comment"># 多层嵌套表示</span><span class="token function">git</span> checkout <span class="token punctuation">[</span>-q<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f<span class="token punctuation">]</span> <span class="token punctuation">[</span>-m<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token function">git</span> checkout <span class="token punctuation">[</span>-q<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f<span class="token punctuation">]</span> <span class="token punctuation">[</span>-m<span class="token punctuation">]</span> <span class="token parameter variable">--detach</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token function">git</span> checkout <span class="token punctuation">[</span>-q<span class="token punctuation">]</span> <span class="token punctuation">[</span>-f<span class="token punctuation">]</span> <span class="token punctuation">[</span>-m<span class="token punctuation">]</span> <span class="token punctuation">[</span>--detach<span class="token punctuation">]</span> <span class="token operator">&lt;</span>commit<span class="token operator">&gt;</span><span class="token comment"># GNU 风格</span>program <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>FILE<span class="token punctuation">]</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="sql-示例"><a class="markdownIt-Anchor" href="#sql-示例"></a> SQL 示例</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">case</span> <span class="token operator">&lt;</span>col<span class="token operator">&gt;</span>  <span class="token keyword">when</span> <span class="token operator">&lt;</span>v<span class="token operator">&gt;</span> <span class="token keyword">then</span> <span class="token operator">&lt;</span>answer<span class="token operator">&gt;</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token keyword">when</span> <span class="token operator">&lt;</span>v<span class="token operator">&gt;</span> <span class="token keyword">then</span> <span class="token operator">&lt;</span>answer<span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>  <span class="token punctuation">[</span><span class="token keyword">else</span> {answer}<span class="token punctuation">]</span><span class="token keyword">END</span> <span class="token punctuation">[</span><span class="token keyword">as</span> alis<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="git-示例"><a class="markdownIt-Anchor" href="#git-示例"></a> Git 示例</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> <span class="token punctuation">[</span>-t <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-m <span class="token operator">&lt;</span>master<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-f<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token punctuation">[</span>no-<span class="token punctuation">]</span>tags<span class="token punctuation">]</span> <span class="token punctuation">[</span>--mirror<span class="token operator">=</span><span class="token operator">&lt;</span>fetch<span class="token operator">|</span>push<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>url<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 计算机技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机基础 </tag>
            
            <tag> 技术文档写作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2025-03-20 小记</title>
      <link href="/2025/03/20/diarly/2025-03-20-diary/"/>
      <url>/2025/03/20/diarly/2025-03-20-diary/</url>
      
        <content type="html"><![CDATA[<h2 id="2025-03-20-小记"><a class="markdownIt-Anchor" href="#2025-03-20-小记"></a> 2025-03-20 小记</h2><ul><li>心情: 🟡</li><li>天气: ☀️</li></ul><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250321102250.png" alt="繁星厅"></p><p>与狗狗一同前往三元桥附近的VTD婚礼艺术中心参观。该中心设有两个宴会厅：一个采用金色系打造的宫廷风格厅（繁星厅），另一个则是以粉色为主的可爱风格厅（星宇厅）。经过考察，我认为这家场地并无特别出色之处，反而存在几个明显的不足：</p><ol><li>没有园区：入口直接面向繁忙马路，给人杂乱的第一印象；</li><li>选择有限：目前仅有两个厅可供使用，另外两个宴会厅尚处于预售阶段；</li><li>装饰简陋：主大厅虽然宽敞但装饰元素匮乏，整体氛围冷清；</li><li>价格偏高：与其他同类场所（如格乐利雅、花嫁丽舍、繁景艺术中心）相比，收费更高却未能提供相应品质的餐饮服务；</li><li>销售服务欠佳：销售人员不仅迟到，且态度缺乏诚意；</li><li>场地改造痕迹明显：场地并非原生婚宴设计，很容易察觉到这里之前是工厂改建而成。</li></ol><p>综合价格与服务因素考量，我不会将此处列入备选名单。</p>]]></content>
      
      
      <categories>
          
          <category> 日记随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
            <tag> 生活 </tag>
            
            <tag> 备婚日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>亚洲疾病问题</title>
      <link href="/2025/03/19/qu-wen/2025-03-19-asian-illness/"/>
      <url>/2025/03/19/qu-wen/2025-03-19-asian-illness/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2><p>两个经济学家卡拉曼和特沃斯基于 1981 年进行了亚洲疾病问题，有一种疾病如果不进行治疗，每天死 600 人，现有两种疗法：</p><ul><li>疗法 A：600 人中 200 人生还；1</li><li>疗法 B：有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 的概率 600 人都存活，有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 的概率无人生还；</li></ul><p>做如下实验：</p><ul><li>实验 1：跟被实验个体将疗法 A 和 B 原封不动的说出来；</li><li>实验 2：针对疗法 A 和 B，重新更改叙述<ul><li>A：会有 400 人死去；</li><li>B： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 的概率无人死去，有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>2</mn><mn>3</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{2}{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 的概率无人生还；</li></ul></li></ul><p>实验结果如下：</p><ul><li>实验 1 有 152 人参与，<strong>72%的人选择疗法 A</strong>，28%的人选择疗法 B；</li><li>实验 2 有 155 人参与，22%的人选择疗法 A，<strong>78%的人选择疗法 B</strong>；</li></ul><p>实验结果证明：</p><ul><li>在有收益的情况下人们是<strong>风险厌恶</strong>的；</li><li>在确定损失的情况下人们是<strong>风险偏好</strong>的；</li></ul><h2 id="框架效应"><a class="markdownIt-Anchor" href="#框架效应"></a> 框架效应</h2><ol><li>风险选择框架<ul><li>在有收益的情况下人们是<strong>风险厌恶</strong>的；</li><li>在确定损失的情况下人们是<strong>风险偏好</strong>的；</li></ul></li><li>特性框架：人们心中存在积极框架和消极框架，如果问题以积极的方式描述的时候就会开心，反之亦然；</li><li>目的性框架：为了达成某种目的，<strong>对同一个问题使用不同的描述产生的效果是不同的</strong>；</li></ol><h2 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h2><table><thead><tr><th></th><th>积极</th><th>消极</th></tr></thead><tbody><tr><td>卖肉</td><td>75%瘦肉</td><td>25%肥肉</td></tr><tr><td>手术</td><td>90%存活率</td><td>10%死亡率</td></tr><tr><td>算命</td><td>你比较长寿啊</td><td>家人比你早死</td></tr><tr><td>加油</td><td>5.6 元/升，现金结账优惠 0.6 元。</td><td>5 元/升，使用信用卡+0.6 元</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 趣闻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 概率 </tag>
            
            <tag> Summary </tag>
            
            <tag> psychology </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2025-03-18 小记</title>
      <link href="/2025/03/18/diarly/2025-03-18-diary/"/>
      <url>/2025/03/18/diarly/2025-03-18-diary/</url>
      
        <content type="html"><![CDATA[<h2 id="2025-03-18-小记"><a class="markdownIt-Anchor" href="#2025-03-18-小记"></a> 2025-03-18 小记</h2><ul><li>心情: 🟢</li><li>天气: ☀️</li></ul><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/20250319160753.png" alt="璟*空间"></p><p>今日与小狗参观了优悦繁景的璟*空间宴会厅，整体印象中规中矩。该场地确有几处亮点：</p><ol><li>空间格局宽敞，宴会厅连同户外草坪总面积达2000平方米；</li><li>高度自由度，室内宴会厅及户外草坪均支持个性化DIY布置；</li><li>餐桌花艺设计雅致精美，视觉效果出众。</li></ol><p>然而，场地也存在一些明显不足：</p><ol><li>场馆前道路状况极差，影响整体到访体验；</li><li>园区环境欠佳，周边商家类型混杂，缺乏高端氛围；</li><li>地理位置较为偏远（位于草房地区），交通便利性不足；</li><li>场地周边一公里范围内设有大型火葬场，从风水角度考量略显不妥。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 日记随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> diary </tag>
            
            <tag> 生活 </tag>
            
            <tag> 备婚日记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛希极限</title>
      <link href="/2025/03/18/qu-wen/2025-03-18-roche-limit/"/>
      <url>/2025/03/18/qu-wen/2025-03-18-roche-limit/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2><p>传统惯性参考系：传统观点认为<strong>静止或者匀速直线运动</strong>的参考系或者<strong>牛顿第一定律成立</strong>的参考系。<br>广义惯性系：在一个引力场中做自由运动且不旋转的参考系是惯性参考系。<br>惯性力：速参考系中应用牛顿定律所产生的一个虚拟力，指的是物体所受的虚拟力。</p><p><strong>示例</strong>：</p><p>在一个加速运动的火车上的人。</p><ul><li>地面参考系：车停止则人停止；</li><li>火车参考系：存在惯性力，大小 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mi>m</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">F=ma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span></span></span></span> ，方向和火车方向相反；</li></ul><h2 id="潮汐力"><a class="markdownIt-Anchor" href="#潮汐力"></a> 潮汐力</h2><p>潮汐力是由于一个天体（如月球或太阳）对另一个天体（如地球）不同部位的引力差异而产生的力。这种力导致了海洋潮汐等现象。<br><strong>场景</strong></p><p>地球被木星吸引，描述在地球上的个人受力；<br><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/%E6%B4%9B%E5%B8%8C%E6%9E%81%E9%99%90_image_1.png" alt="受力分析"></p><p>一个人的受力： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mtext>地球万有引力</mtext><mo>+</mo><mtext>木星万有引力</mtext><mo>+</mo><mtext>惯性力</mtext></mrow><annotation encoding="application/x-tex">F=地球万有引力+木星万有引力+惯性力</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">球</span><span class="mord cjk_fallback">万</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">引</span><span class="mord cjk_fallback">力</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">木</span><span class="mord cjk_fallback">星</span><span class="mord cjk_fallback">万</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">引</span><span class="mord cjk_fallback">力</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">惯</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">力</span></span></span></span> ；<br>潮汐力大小： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mtext>木星万有引力</mtext><mo>+</mo><mtext>惯性力</mtext></mrow><annotation encoding="application/x-tex">F=木星万有引力+惯性力</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">木</span><span class="mord cjk_fallback">星</span><span class="mord cjk_fallback">万</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">引</span><span class="mord cjk_fallback">力</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">惯</span><span class="mord cjk_fallback">性</span><span class="mord cjk_fallback">力</span></span></span></span> ；</p><ul><li>People1：木星引力&gt;惯性力；</li><li>People2：木星引力&lt;惯性力；</li></ul><h2 id="洛希极限"><a class="markdownIt-Anchor" href="#洛希极限"></a> 洛希极限</h2><p>洛希极限：<strong>当小天体所受到的潮汐力=自身的引力时，之间的距离称之为洛溪极限</strong>。</p><p>刚体洛希极限计算公式， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">\rho_{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表大天体密度； <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\rho_{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表小天体密度； <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">R_{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表大天体半径。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1.26</mn><mo>×</mo><mroot><mfrac><msub><mi>ρ</mi><mi>M</mi></msub><msub><mi>ρ</mi><mi>m</mi></msub></mfrac><mn>3</mn></mroot><mo>×</mo><msub><mi>R</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">r=1.26 \times \sqrt[3]{\frac{\rho_{M}}{\rho_{m}} } \times R_{M}  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.9925650000000004em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5951419999999995em;"><span style="top:-2.7729219999999994em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4474349999999996em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.407435em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg width="400em" height="2.48em" viewBox="0 0 400000 2592" preserveAspectRatio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9925650000000004em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>流体洛希极限计算公式， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">\rho_{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表大天体密度； <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\rho_{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表小天体密度； <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">R_{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 代表大天体半径。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>=</mo><mn>2.44</mn><mo>×</mo><mroot><mfrac><msub><mi>ρ</mi><mi>M</mi></msub><msub><mi>ρ</mi><mi>m</mi></msub></mfrac><mn>3</mn></mroot><mo>×</mo><msub><mi>R</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">r=2.44 \times \sqrt[3]{\frac{\rho_{M}}{\rho_{m}} } \times R_{M}  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">.</span><span class="mord">4</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.9925650000000004em;"></span><span class="mord sqrt"><span class="root"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5951419999999995em;"><span style="top:-2.7729219999999994em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size6 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4474349999999996em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.407435em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg width="400em" height="2.48em" viewBox="0 0 400000 2592" preserveAspectRatio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9925650000000004em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><h2 id="应用"><a class="markdownIt-Anchor" href="#应用"></a> 应用</h2><h3 id="土星光环"><a class="markdownIt-Anchor" href="#土星光环"></a> 土星光环</h3><p>土星光环：科学家认为一颗彗星被土星潮汐力撕碎了，形成了光环。</p><h3 id="苏梅克列维-9-号"><a class="markdownIt-Anchor" href="#苏梅克列维-9-号"></a> 苏梅克列维 9 号</h3><p>苏梅克列维 9 号于 1992 年被木星潮汐力撕碎，1994 年与木星相撞。</p><h3 id="流浪地球"><a class="markdownIt-Anchor" href="#流浪地球"></a> 流浪地球</h3><p>假设地球是一个刚体，那么他的洛希极限是<strong>5.6WKM</strong>，比木星的半径<strong>7.15WKM</strong> 要小，这说明地球必须进入木星才会被潮汐力撕碎。假定地球是一个流体，那么它的洛希极限是<strong>10.9WKM</strong>。由于地球既不是流体也不是刚体，所以他和木星的洛希极限应该在<strong>5.6WKM</strong>和<strong>10.9WKM</strong>之间。</p><blockquote><p>Moss 给出的洛希极限其实是太阳和木星的（<strong>89WKM</strong>和<strong>171WKM</strong>），而不是地球和木星的。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 趣闻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Summary </tag>
            
            <tag> Astronomy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单利和复利</title>
      <link href="/2025/03/17/qu-wen/2025-03-17-compound-interest/"/>
      <url>/2025/03/17/qu-wen/2025-03-17-compound-interest/</url>
      
        <content type="html"><![CDATA[<h2 id="欧拉数"><a class="markdownIt-Anchor" href="#欧拉数"></a> 欧拉数</h2><p>欧拉数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">e</mi></mrow><annotation encoding="application/x-tex">\mathrm{e}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">e</span></span></span></span></span> ：不是欧拉第一个提出，欧拉只是第一个使用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">e</mi></mrow><annotation encoding="application/x-tex">\mathrm{e}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">e</span></span></span></span></span> 来表示自然对数的人；</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">e</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msup><mo stretchy="false">)</mo><mi>n</mi></msup><mo separator="true">,</mo><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\mathrm{e}=(1+\frac{1}{n})^{n},n\rightarrow \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">e</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></span></p><h2 id="复利"><a class="markdownIt-Anchor" href="#复利"></a> 复利</h2><p>举一个实际的例子，假定名义利率 10%，半年一复利，即半年名义利率 5%，本金 100 元，则：</p><ul><li>上半年： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mo>×</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mn>0.05</mn><mo stretchy="false">)</mo><mo>=</mo><mn>105</mn></mrow><annotation encoding="application/x-tex">100 \times (1+0.05) = 105</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span></span></span></span></li><li>下半年： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>105</mn><mo>×</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mn>0.05</mn><mo stretchy="false">)</mo><mo>=</mo><mn>110.25</mn></mrow><annotation encoding="application/x-tex">105 \times(1+0.05) = 110.25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">5</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span></span></span></span></li></ul><p>如果没有复利，则一年收益为 110，如果有复利的情况下，实际利率为 10.25%。如果复利无限细分，那么会发生什么呢？假定 n 期的情况下，计算公式变为：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mi>V</mi><mo>=</mo><mi>P</mi><mi>V</mi><mo>×</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mi>r</mi><mi>n</mi></mfrac><msup><mo stretchy="false">)</mo><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">FV = PV \times(1+\frac{r}{n})^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935600000000003em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></p><p>r 表示名义利率；n 表示期数；PV 表示本金；FV 表示收益。当无限复利发生时，整个公式变为：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mi>V</mi><mo>=</mo><mi>P</mi><mi>V</mi><mo>×</mo><msup><mi mathvariant="normal">e</mi><mi>r</mi></msup><mo separator="true">,</mo><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">FV = PV \times \mathrm{e}^r,n\rightarrow \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9088319999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">e</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></span></p><p>此时如果名义利率是 10%，本金 100，则 FV=110.517；如果名义利率提升到 100%，则 FV=271.8。</p><h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h2><ol><li>复利有他的极限，极限就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">e</mi><mi>r</mi></msup></mrow><annotation encoding="application/x-tex">\mathrm{e}^r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">e</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span></span></span></span> ；</li><li>复利的结果仅和名义利率有关系，和其他因素都没有关系；</li></ol>]]></content>
      
      
      <categories>
          
          <category> 趣闻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试页面</title>
      <link href="/2025/03/17/2025-03-17-page-test/"/>
      <url>/2025/03/17/2025-03-17-page-test/</url>
      
        <content type="html"><![CDATA[<h2 id="二级标题"><a class="markdownIt-Anchor" href="#二级标题"></a> 二级标题</h2><h3 id="三级标题"><a class="markdownIt-Anchor" href="#三级标题"></a> 三级标题</h3><h4 id="四级标题"><a class="markdownIt-Anchor" href="#四级标题"></a> 四级标题</h4><h5 id="五级标题"><a class="markdownIt-Anchor" href="#五级标题"></a> 五级标题</h5><h6 id="六级标题"><a class="markdownIt-Anchor" href="#六级标题"></a> 六级标题</h6><h2 id="段落"><a class="markdownIt-Anchor" href="#段落"></a> 段落</h2><p>I think I’ll use it to format all of my documents from now on.First line with the HTML tag after.</p><p>And the next line.</p><p>Apache Derby 是由 Apache Software Foundation 开发的关系数据库管理系统()。是一个完全用 java 编写的数据库，Derby 是一个 Open source 的产品，基于 Apache License 2.0分发。</p><p>Apache Derby 非常小巧，核心部分 derby. jar 只有 2M，所以既可以做为单独的数据库服务器使用，也可以内嵌在应用程序中使用。</p><h2 id="有序列表"><a class="markdownIt-Anchor" href="#有序列表"></a> 有序列表</h2><ol><li>1</li><li>2</li><li>3</li><li>4</li></ol><h2 id="无序列表"><a class="markdownIt-Anchor" href="#无序列表"></a> 无序列表</h2><ul><li>1</li><li>2</li><li>3</li><li>4</li></ul><h2 id="任务列表"><a class="markdownIt-Anchor" href="#任务列表"></a> 任务列表</h2><ul><li>[ ] Eat</li><li>[x] Code<ul><li>[x] HTML</li><li>[x] CSS</li><li>[x] JavaScript</li></ul></li><li>[ ] Sleep</li></ul><h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2><h3 id="代码块"><a class="markdownIt-Anchor" href="#代码块"></a> 代码块</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span><span class="token punctuation">{</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span><span class="token punctuation">(</span> id <span class="token keyword">BIGINT</span><span class="token punctuation">,</span> name STRING<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="行内代码"><a class="markdownIt-Anchor" href="#行内代码"></a> 行内代码</h3><p><code>import numpy as np</code><br><code>sb.append("a");</code><br><code>select * from tbl;</code></p><h2 id="字体变化"><a class="markdownIt-Anchor" href="#字体变化"></a> 字体变化</h2><p>加粗：<strong>加粗</strong><br>斜体：<em>斜体</em><br>高亮：<mark>高亮</mark><br>删除线：<s>删除线</s><br>下划线：<u>下划线</u><br>斜体加粗：<em><strong>斜体加粗</strong></em></p><h2 id="表格"><a class="markdownIt-Anchor" href="#表格"></a> 表格</h2><table><thead><tr><th style="text-align:left">left</th><th style="text-align:center">center</th><th style="text-align:right">right</th></tr></thead><tbody><tr><td style="text-align:left">aaaa</td><td style="text-align:center">bbbbbb</td><td style="text-align:right">ccccc</td></tr><tr><td style="text-align:left">a</td><td style="text-align:center">b</td><td style="text-align:right">c</td></tr></tbody></table><p>添加链接的表格</p><table><thead><tr><th>name</th><th>age</th><th>blog</th></tr></thead><tbody><tr><td><em>LearnShare</em></td><td>12</td><td><a href="http://xianbai.me">LearnShare</a></td></tr><tr><td><strong>Mike</strong></td><td>32</td><td><a href="http://mike.me">Mike</a></td></tr></tbody></table><h2 id="分割线"><a class="markdownIt-Anchor" href="#分割线"></a> 分割线</h2><hr><h2 id="链接"><a class="markdownIt-Anchor" href="#链接"></a> 链接</h2><p>外部链接：<a href="https://www.google.com/">Google</a><br>内部链接：[[红景天]]<br>块链接：[[#无序列表]]<br>网站链接： <a href="https://markdown.com.cn">https://markdown.com.cn</a><br>加粗格式链接：I love supporting the <strong><a href="https://eff.org">EFF</a></strong>.<br>斜体格式链接：This is the <em><a href="https://www.markdownguide.org">Markdown Guide</a></em>.<br>代码格式链接：See the section on <a href="#code"><code>code</code></a>.</p><h2 id="html"><a class="markdownIt-Anchor" href="#html"></a> HTML</h2><p>按键：<kbd>Ctrl</kbd>+<kbd>c</kbd></p>]]></content>
      
      
      <categories>
          
          <category> PKM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>炸金花</title>
      <link href="/2025/03/17/qu-wen/2025-03-17-chinese-poker/"/>
      <url>/2025/03/17/qu-wen/2025-03-17-chinese-poker/</url>
      
        <content type="html"><![CDATA[<h2 id="炸金花规则"><a class="markdownIt-Anchor" href="#炸金花规则"></a> 炸金花规则</h2><p>游戏参与人数 2-6 人，使用一副去掉到大小王的扑克牌，共 52 张牌。比牌时双方不能看到互相的牌，胜者继续游戏直至结束本局，负者损失本副牌的操作权，只在每局牌结束时可见。比牌时如出现双方牌型及大小相同的情况，主动比牌者为负者。每局结束时，所有玩家只能看见自己比过或跟自己比过的玩家的手牌。</p><p>豹子&gt;同花顺&gt;同花&gt;顺子&gt;一对&gt;散牌</p><blockquote><p>牌型大小和抽到的概率一定成反比吗？</p></blockquote><h2 id="概率"><a class="markdownIt-Anchor" href="#概率"></a> 概率</h2><ul><li>总共的牌型数量： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>C</mi><mn>52</mn><mn>3</mn></msubsup><mo>=</mo><mfrac><mrow><mn>52</mn><mo>×</mo><mn>51</mn><mo>×</mo><mn>50</mn></mrow><mrow><mn>1</mn><mo>×</mo><mn>2</mn><mo>×</mo><mn>3</mn></mrow></mfrac><mo>=</mo><mn>22100</mn></mrow><annotation encoding="application/x-tex">C_{52}^{3} = \frac{52 \times 51 \times 50}{1 \times 2 \times 3} = 22100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0622159999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">×</span><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mord mtight">2</span><span class="mbin mtight">×</span><span class="mord mtight">5</span><span class="mord mtight">1</span><span class="mbin mtight">×</span><span class="mord mtight">5</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span></li><li>豹子： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn><mo>×</mo><mn>4</mn><mo>=</mo><mn>52</mn></mrow><annotation encoding="application/x-tex">13 \times 4=52</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">2</span></span></span></span></li><li>同花顺： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>×</mo><mn>12</mn><mo>=</mo><mn>48</mn></mrow><annotation encoding="application/x-tex">4\times 12=48</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">8</span></span></span></span></li><li>同花： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mo>×</mo><msubsup><mi>C</mi><mn>13</mn><mn>3</mn></msubsup><mo>−</mo><mn>48</mn><mo>=</mo><mn>1096</mn></mrow><annotation encoding="application/x-tex">4\times C_{13}^{3} - 48=1096</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0622159999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">3</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span></span></span></span></li><li>顺子： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mo>×</mo><mn>4</mn><mo>×</mo><mn>4</mn><mo>×</mo><mn>4</mn><mo>−</mo><mn>48</mn><mo>=</mo><mn>720</mn></mrow><annotation encoding="application/x-tex">12 \times 4\times 4 \times 4 - 48 = 720</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">2</span><span class="mord">0</span></span></span></span></li><li>对子： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn><mo>×</mo><msubsup><mi>C</mi><mn>4</mn><mn>2</mn></msubsup><mo>∗</mo><mn>48</mn><mo>=</mo><mn>3744</mn></mrow><annotation encoding="application/x-tex">13 \times C_{4}^{2} * 48 = 3744</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.0622159999999998em;vertical-align:-0.24810799999999997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mord">4</span><span class="mord">4</span></span></span></span></li><li>散牌： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>22100</mn><mo>−</mo><mn>52</mn><mo>−</mo><mn>48</mn><mo>−</mo><mn>1096</mn><mo>−</mo><mn>720</mn><mo>−</mo><mn>3744</mn><mo>=</mo><mn>16440</mn></mrow><annotation encoding="application/x-tex">22100-52-48-1096-720-3744=16440</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">7</span><span class="mord">2</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mord">4</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">4</span><span class="mord">4</span><span class="mord">0</span></span></span></span></li></ul><p>如果按照概率：同花顺&gt;豹子&gt;顺子&gt;同花&gt;对子&gt;散牌</p><table><thead><tr><th></th><th style="text-align:center">豹子</th><th style="text-align:center">同花顺</th><th style="text-align:center">同花</th><th style="text-align:center">顺子</th><th style="text-align:center">一对</th></tr></thead><tbody><tr><td>p</td><td style="text-align:center">0.24%</td><td style="text-align:center">0.22%</td><td style="text-align:center">5.0%</td><td style="text-align:center">3.3%</td><td style="text-align:center">16.9%</td></tr><tr><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mi>p</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{p}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.326216em;vertical-align:-0.481108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></td><td style="text-align:center">425</td><td style="text-align:center">460</td><td style="text-align:center">20</td><td style="text-align:center">31</td><td style="text-align:center">6</td></tr></tbody></table><h2 id="跟人数的关系"><a class="markdownIt-Anchor" href="#跟人数的关系"></a> 跟人数的关系</h2><p>如果是一个人玩游戏，那么他的概率就是上面分析的，但是多人游戏的情况下是否会对整体有任何影响呢？</p><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/%E7%82%B8%E9%87%91%E8%8A%B1_image_1.png" alt="概率"></p><p><img src="https://typora-img-chart.oss-cn-beijing.aliyuncs.com/%E7%82%B8%E9%87%91%E8%8A%B1_image_2.png" alt="金花概率"></p><h2 id="结论"><a class="markdownIt-Anchor" href="#结论"></a> 结论</h2><ol><li>无论多少人玩游戏，顺子的概率低于金花，同花顺的概率低于豹子；</li><li>炸金花游戏不是牌型越大越难抓；</li><li>扑克不是完全的概率游戏，需要心里博弈；</li></ol>]]></content>
      
      
      <categories>
          
          <category> 趣闻 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博弈论 </tag>
            
            <tag> 概率 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/03/17/hello-world/"/>
      <url>/2025/03/17/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
